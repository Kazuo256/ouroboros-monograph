% Arquivo LaTeX de exemplo de dissertação/tese a ser apresentados à CPG do IME-USP
% 
% Versão 5: Sex Mar  9 18:05:40 BRT 2012
%
% Criação: Jesús P. Mena-Chalco
% Revisão: Fabio Kon e Paulo Feofiloff
%  
% Obs: Leia previamente o texto do arquivo README.txt

% Alterado para monografia do trabalho de formatura (graduação).

\documentclass[11pt,twoside,a4paper]{book}

% ---------------------------------------------------------------------------- %
% Pacotes 
\usepackage[T1]{fontenc}
\usepackage[brazil]{babel}
\usepackage[utf8]{inputenc}
\usepackage[pdftex]{graphicx}           % usamos arquivos pdf/png como figuras
\usepackage{setspace}                   % espaçamento flexível
\usepackage{indentfirst}                % indentação do primeiro parágrafo
\usepackage{makeidx}                    % índice remissivo
\usepackage[nottoc]{tocbibind}          % acrescentamos a bibliografia/indice/conteudo no Table of Contents
\usepackage{courier}                    % usa o Adobe Courier no lugar de Computer Modern Typewriter
\usepackage{type1cm}                    % fontes realmente escaláveis
\usepackage{listings}                   % para formatar código-fonte (ex. em Java)
\usepackage{titletoc}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{clrscode}
\usepackage[sf,bf,small]{titlesec} % cabeçalhos dos títulos: menores e compactos
\usepackage[fixlanguage]{babelbib}
\usepackage[font=small,format=plain,labelfont=bf,up,textfont=it,up]{caption}
\usepackage{subcaption}
\usepackage{wrapfig}
\usepackage[usenames,svgnames,dvipsnames]{xcolor}
\usepackage[a4paper,top=2.54cm,bottom=2.0cm,left=2.0cm,right=2.54cm]{geometry} % margens
%\usepackage[pdftex,plainpages=false,pdfpagelabels,pagebackref,colorlinks=true,citecolor=black,linkcolor=black,urlcolor=black,filecolor=black,bookmarksopen=true]{hyperref} % links em preto
\usepackage[pdftex,plainpages=false,pdfpagelabels,pagebackref,colorlinks=true,citecolor=DarkGreen,linkcolor=NavyBlue,urlcolor=DarkRed,filecolor=green,bookmarksopen=true]{hyperref} % links coloridos
\usepackage[all]{hypcap}                % soluciona o problema com o hyperref e capitulos
\usepackage[square,sort,nonamebreak,comma]{natbib}  % citação bibliográfica alpha (alpha-ime.bst)
\usepackage{framed,color}
\fontsize{60}{62}\usefont{T1}{cmr}{m}{n}{\selectfont}

% ---------------------------------------------------------------------------- %
% Cabeçalhos similares ao TAOCP de Donald E. Knuth
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{\texttt{#1}}}{}}
\renewcommand{\sectionmark}[1]{\markright{\MakeUppercase{\texttt{#1}}}{}}
\renewcommand{\headrulewidth}{0pt}

% ---------------------------------------------------------------------------- %
\graphicspath{{./figuras/}}             % caminho das figuras (recomendável)
\frenchspacing                          % arruma o espaço: id est (i.e.) e exempli gratia (e.g.) 
\urlstyle{same}                         % URL com o mesmo estilo do texto e não mono-spaced
\makeindex                              % para o índice remissivo
\raggedbottom                           % para não permitir espaços extra no texto
\fontsize{60}{62}\usefont{T1}{cmr}{m}{n}{\selectfont}
\cleardoublepage
\normalsize

% ---------------------------------------------------------------------------- %
% Opções de listing usados para o código fonte
% Ref: http://en.wikibooks.org/wiki/LaTeX/Packages/Listings
\lstdefinelanguage{lua}
  {morekeywords={and,break,do,else,elseif,end,false,for,function,if,in,local,
     nil,not,or,repeat,return,then,true,until,while},
   morekeywords={[2]arg,assert,collectgarbage,dofile,error,_G,getfenv,
     getmetatable,ipairs,load,loadfile,loadstring,next,pairs,pcall,print,
     rawequal,rawget,rawset,select,setfenv,setmetatable,tonumber,tostring,
     type,unpack,_VERSION,xpcall},
   morekeywords={[2]coroutine.create,coroutine.resume,coroutine.running,
     coroutine.status,coroutine.wrap,coroutine.yield},
   morekeywords={[2]module,require,package.cpath,package.load,package.loaded,
     package.loaders,package.loadlib,package.path,package.preload,
     package.seeall},
   morekeywords={[2]string.byte,string.char,string.dump,string.find,
     string.format,string.gmatch,string.gsub,string.len,string.lower,
     string.match,string.rep,string.reverse,string.sub,string.upper},
   morekeywords={[2]table.concat,table.insert,table.maxn,table.remove,
   table.sort},
   morekeywords={[2]math.abs,math.acos,math.asin,math.atan,math.atan2,
     math.ceil,math.cos,math.cosh,math.deg,math.exp,math.floor,math.fmod,
     math.frexp,math.huge,math.ldexp,math.log,math.log10,math.max,math.min,
     math.modf,math.pi,math.pow,math.rad,math.random,math.randomseed,math.sin,
     math.sinh,math.sqrt,math.tan,math.tanh},
   morekeywords={[2]io.close,io.flush,io.input,io.lines,io.open,io.output,
     io.popen,io.read,io.tmpfile,io.type,io.write,file:close,file:flush,
     file:lines,file:read,file:seek,file:setvbuf,file:write},
   morekeywords={[2]os.clock,os.date,os.difftime,os.execute,os.exit,os.getenv,
     os.remove,os.rename,os.setlocale,os.time,os.tmpname},
   alsodigit = {.},
   sensitive=true,
   morecomment=[l]{--},
   morecomment=[s]{--[[}{]]},
   morestring=[b]",
   morestring=[d]',
   morestring=[s]{[[}{]]},
  }

\lstset{ %
  language=C++,                   % choose the language of the code
  basicstyle=\footnotesize,       % the size of the fonts that are used for the code
  numbers=left,                   % where to put the line-numbers
  numberstyle=\footnotesize,      % the size of the fonts that are used for the line-numbers
  stepnumber=1,                   % the step between two line-numbers. If it's 1 each line will be numbered
  numbersep=5pt,                  % how far the line-numbers are from the code
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  frame=single,                 % adds a frame around the code
  framerule=0.6pt,
  tabsize=2,                      % sets default tabsize to 2 spaces
  captionpos=b,                   % sets the caption-position to bottom
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
  escapeinside={\%*}{*)},         % if you want to add a comment within your code
  backgroundcolor=\color[rgb]{1.0,1.0,1.0}, % choose the background color.
  rulecolor=\color[rgb]{0.8,0.8,0.8},
  basicstyle=\ttfamily\scriptsize,
  keywordstyle=\color{blue}\bfseries,
  keywordstyle=[2]\color[rgb]{.4,0,.4}\bfseries,
  commentstyle=\color[rgb]{0,.6,0},
  stringstyle=\color{red},
  showstringspaces=false,
  upquote=true,
  extendedchars=true,
  xleftmargin=10pt,
  xrightmargin=10pt,
  framexleftmargin=10pt,
  framexrightmargin=10pt,
  morekeywords={[2]include,ifdef,define,ifndef,endif,}
}

% ---------------------------------------------------------------------------- %
% Corpo do texto
\begin{document}
\frontmatter 
% cabeçalho para as páginas das seções anteriores ao capítulo 1 (frontmatter)
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}
\setcounter{tocdepth}{2}
\fancyhead[LE]{\thepage\hspace{2em}\footnotesize{\leftmark}}
\fancyhead[RE,LO]{}
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}

\onehalfspacing  % espaçamento

% ---------------------------------------------------------------------------- %
% CAPA
% Nota: O título para as dissertações/teses do IME-USP devem caber em um 
% orifício de 10,7cm de largura x 6,0cm de altura que há na capa fornecida pela SPG.
\thispagestyle{empty}
\begin{center}
  \vspace*{2.3cm}
  \textsf{\textbf{
    {\LARGE Projeto Ouroboros }\\
    {
      \Large Sistema de integração automatizada entre \\
      \texttt{C++} e linguagens de \emph{script}
    }
  }}
    
  \vspace*{1.2cm}
  \textsf{\Large{Fernando Omar Aluani}} \\
  \textsf{\Large{Wilson Kazuo Mizutani}}
  
  \vskip 2cm
  \textsc{Trabalho de conclusão de curso} 
  
  \vskip 10cm
  \textsf{Orientador: Prof. Dr. Marcos Dimas Gubitoso}

  \vskip 3cm
  
  \normalsize{São Paulo, Dezembro de 2013}
\end{center}

\pagenumbering{roman}     % começamos a numerar 

% --------------------------------- %
% Agradecimentos
\chapter*{Agradecimentos}

Muitos de nós programadores sofremos de uma curiosidade mórbida em fazer
programas incrivelmente elaborados e inusitados idenpendentemente da utilidade
deles só para saber se uma ideia que tivemos realmente funciona. Muitas vezes é
esse impulso que leva ao desenvolvimento sistemas importantes, outras ele
simplesmente leva a boas risadas. Mas uma coisa é certa: essas obsessões são boa
parte do que nos faz querer aprender mais e mais.

Gostaríamos de agradecer a todos que incentivaram em nós essa curiosidade
mórbida, tanto professores quanto amigos. Seja por ter-nos mostrado um truque
de código, ou ensinado alguma técnica secreta de programação, ou ainda
simplesmente apoiado uma de nossas ideia malucas. Muito do que fizemos nesse
trabalho vem da nossa vontade de experimentar com combinações divertidas do que
aprendemos ao longo da nossa vida como estudantes de Ciência da Computação.

% ---------------------------------------------------------------------------- %
% Resumo
\chapter*{Resumo}

%TODO: COMPLETAR PARA A VERSAO FINAL
Isso será escrito na versão final da monografia.

% ------------------------------------------------------------------ %
% facilidades                                                        %
% ------------------------------------------------------------------ %

\renewcommand{\ttdefault}{txtt}
\def\cyclic#1{\langle #1 \rangle}
\def\script{\emph{script}}
\def\lang#1{\texttt{#1}}
\def\CXX{\lang{C++}}
\def\C{\lang{C}}
\def\VObj{\lang{VirtualObj}}
\def\SMgr{\lang{ScriptManager}}
\def\VMac{\lang{VirtualMachine}}
\def\VData{\lang{VirtualData}}
\def\str#1{cadeia#1 de caracteres}

% comandos novos %
\newcounter{defcnt}
\newcommand\definicao[1]{
    \stepcounter{defcnt}
    \begin{framed}
      \textbf{Definição \thechapter.\thedefcnt:}

      \vspace{.5em}
      \hspace{-20pt}
      #1
    \end{framed}
}
\newcommand\notacao{
    \textbf{Notação} \hspace{0.2cm}
}

% ---------------------------------------------------------------------------- %
% Sumário
\tableofcontents    % imprime o sumário

% ---------------------------------------------------------------------------- %
% Capítulos do trabalho
\mainmatter

% cabeçalho para as páginas de todos os capítulos
\fancyhead[RE,LO]{\thesection}

\singlespacing              % espaçamento simples

\input parte-intro
\input parte-objetiva       % associado ao arquivo: 'cap-objetiva.tex'
\input parte-subjetiva      % associado ao arquivo: 'cap-subjetiva.tex'

% cabeçalho para os apêndices
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{\appendixname\ \thechapter}} {\MakeUppercase{#1}} }
\fancyhead[RE,LO]{}
\appendix

%\include{ape-conjuntos}      % associado ao arquivo: 'ape-conjuntos.tex'

% ---------------------------------------------------------------------------- %
% Bibliografia
\renewcommand\bibname{Referências}
\backmatter \singlespacing   % espaçamento simples
\bibliographystyle{alpha-ime}% citação bibliográfica alpha
\bibliography{bibliografia}  % associado ao arquivo: 'bibliografia.bib'

\end{document}
