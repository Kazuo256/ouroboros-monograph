
\chapter{Introdução}
\label{sec:intr}

É comum, principalmente no desenvolvimento de jogos eletrônicos, a necessidade
de um método prático de se inserir conteúdo lógico dinâmicamente em uma
aplicação (isto é, durante a execução dela). Linguagens de \script{} (como Lua ou
Python) são ferramentas popularmente usadas para atender esse tipo de
funcionalidade. Elas podem ter seu código fonte tanto compilado e processado
dinamicamente quanto incorporado na aplicação desejada. A aplicação, por sua
vez, torna-se capaz de acessar essas conveniências. No entanto, tal incorporação
pode trazer vários desafios, especialmente o de ter que aprender a usar uma API
(\textit{Application Programming Interface}) diferente para cada linguagem de
\script{} usada.

Esta monografia apresentará um sistema de software que permite ao usuário
integrar facilmente diversas linguagens de \script{} a um programa escrito em
\CXX{} usando uma API unificada para incorporação e um exportador
automatizado de interfaces em \CXX{} para essas linguagens de \script{}. São
explicados todos os principais mecanismos desse sistema, assim como a teoria e a
tecnologia por trás deles.

\section{Motivação}
\label{sec:intr:motivacao}
O que nos levou a fazer esse sistema foi nosso trabalho no USPGameDev\footnote{
  O USPGameDev é um grupo de pesquisa e desenvolvimento de jogos da
  Universidade de São Paulo. Ver \url{uspgamedev.org} (último acesso: 
  15/09/2013).
}.
Lá, nós (e os outros da equipe) desenvolvemos uma plataforma para jogos
bidimensionais (a UGDK\footnotemark), além de um jogo que usava a plataforma, ambos feitos em \CXX{}.

\footnotetext{
  A UGDK é um dos principais projetos do USPGameDev, e seu
  nome é um acrônimo que pode significar tanto \emph{USP Game Development
  Kit} quanto \emph{USPGameDev Kit}. Ela é desenvolvida em \CXX{}.
}

Mas \CXX{}, mesmo sendo extremamente poderosa, não é exatamente uma linguagem
fácil de usar, o que começou a causar gargalos no desenvolvimento
dos nossos programas. Decidimos que precisávamos ter suporte a alguma linguagem
de \script{}, mas não conseguimos nos decidir qual usar. Por um lado tínhamos
Python, com suas vastas extensões e facilidades, e por outro Lua, com sua
simplicidade e versatilidade.

Eventualmente pensamos numa idéia ``melhor de dois mundos'': usar ambas linguagens.
E depois de algumas discussões sobre como implementar tal idéia e outras opções,
vimos que não só essa era uma das melhores opções para nós, como também era
possível ser feita. Então nós dois (autores desse trabalho de formatura) começamos
a desenvolver o então chamado ``sistama de scripts da UGDK''. Após alguns meses
de desenvolvimento o sistema ficou pronto para uso, porém depois que começamos 
a usá-lo em grande porte fomos descobrindo alguns problemas no sistema.

Finalmente, decidimos usar o sistema que desenvolvemos no nosso trabalho de 
formatura, com o objetivo de melhorar alguns pontos do sistema e corrigir
os problemas encontrados.

\section{Objetivos}
\label{sec:intr:objetivos}

Pode-se resumir a proposta do nosso projeto nas seguintes partes:

\begin{enumerate}
  \item Desenvolvimento de uma biblioteca \CXX{} que abstrai o uso da API de
        certas linguagens de \script{} de forma clara, prática de usar, e
        facilmente estendível para aceitar outras linguagens com características
        similares. Inicialmente ela trabalhará com \lang{Lua} e \lang{Python}. O
        usuário da biblioteca não terá necessidade de conhecer especificamente a
        API dessas linguagens para incorporá-las em seu programa, assim como não
        precisará se importar com qual linguagem de fato está sendo usada, pois
        o sistema será capaz de reconhecer automaticamente as linguagens que ele
        aceita.
  \item Desenvolvimento de uma ferramenta que interpreta parte do código \CXX{}
        do usuário a fim de gerar \emph{wrappers}\footnotemark{} das classes e
        funções desse código para cada linguagem de \script{} que o sistema
        estiver configurado para reconhecer. Assim, o usuário poderá usufruir
        das funcionalidades que desenvolveu em \CXX{} na liguagem de \script{}
        de sua preferência.
  \item Desenvolvimento de módulos de \lang{CMake} que garantam a devida
        compilação e funcionamento conjunto dos dois resultados acima de maneira
        a simplificar o máximo possível o uso do sistema como um todo. Também
        elaborar uma documentação básica sobre como usar o \emph{software}
        resultante do projeto.

\end{enumerate}

\footnotetext{
  Código fonte, nesse caso em \CXX{}, que serve de intermediário para um
  ambiente externo, como as linguagens de \script{}.
}
